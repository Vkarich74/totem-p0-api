## A  .gitignore
A  2026_01_25_add_booking_status.sql
A  ARCHITECTURE.md
A  CORE_CONTRACTS.md
A  CORE_FLOW_v1.md
A  DB_CONTRACT.md
A  FREEZE.md
A  OPS_RUNBOOK.md
A  OPS_RUNBOOK_MINIMAL.md
A  PAYMENTS_BACKEND_READY.md
A  PAYMENTS_CONTRACT.md
A  PAYMENTS_DOMAIN.md
A  PAYMENTS_STATUSES.md
A  PAYMENT_PROVIDER_CONTRACT_v1.md
A  PAYMENT_UX_FLOW.md
A  PAYOUT_CONTRACT_v1.md
A  RELEASE_CHECKLIST.md
A  RELEASE_PACK.md
A  SCALE_CONTRACT.md
A  alerts/alert.js
A  bi/adapters/booking.adapter.js
A  bi/adapters/payment.adapter.js
A  bi/adapters/payout.adapter.js
A  bi/index.js
A  config/payments.flags.json
A  contracts/dataContracts.v1.js
A  contracts/registry/index.js
A  core/bookingStatus.js
A  core/idempotency.js
A  core/metrics.js
A  core/payments.js
A  core/payouts.js
A  core/publicTokens.js
A  core/refunds.js
A  core/reports.js
A  core/retention.js
A  core/settlement.js
A  core/settlementAdmin.js
A  core/tenantMetrics.js
A  db.js
A  db/index.js
A  db/migrations/2026_01_28_p5_1_fix_payments_is_active.sql
A  db/migrations/2026_01_28_p5_1_full_fix.sql
A  db/migrations/2026_01_28_p5_1_payments_payouts.sql
A  db/migrations/2026_01_28_p5_2_add_updated_at.sql
A  db/migrations/2026_01_28_p5_2_fix_updated_at_default.sql
A  db_bootstrap_public_v1.sql
A  docs/ERROR_CODES.md
A  docs/ONBOARDING_v1.md
A  docs/PUBLIC_API_V1_CANONICAL.md
A  docs/PUBLIC_API_v1.md
A  docs/PUBLIC_WIDGET_CONTRACT.md
A  docs/README.md
A  docs/RELEASE_CHECKLIST.md
A  docs/TOKENS_AND_SECURITY.md
A  docs/WIDGET_INTEGRATION.md
A  docs/async/ASYNC_JOBS_OVERVIEW.md
A  docs/async/ASYNC_JOB_STATES.md
A  docs/async/ASYNC_RETRY_POLICY.md
A  docs/async/CRON_POLICY.md
A  docs/booking/BOOKING_CHECKLIST.md
A  docs/booking/BOOKING_ERROR_CODES.md
A  docs/booking/BOOKING_RACE_CONDITIONS.md
A  docs/booking/BOOKING_STATES.md
A  docs/booking/BOOKING_TRANSITIONS.md
A  docs/booking/BOOKING_TTL_POLICY.md
A  docs/crm/CRM_AUDIT_LOG.md
A  docs/crm/CRM_LEAD_STATES.md
A  docs/crm/CRM_LEAD_TRANSITIONS.md
A  docs/crm/CRM_SOURCES.md
A  docs/crm/CRM_WEBHOOKS.md
A  docs/index.html
A  docs/owner/OWNER_AUDIT_LOG.md
A  docs/owner/OWNER_PERMISSIONS.md
A  docs/owner/OWNER_ROLES.md
A  docs/owner/OWNER_UX_FLOW.md
A  docs/payments/PAYMENTS_BOOKING_MAPPING.md
A  docs/payments/PAYMENTS_INTEGRATION_GUIDE.md
A  docs/payments/PAYMENTS_RACE_CONDITIONS.md
A  docs/payments/PAYMENTS_RETRY_POLICY.md
A  docs/payments_automation/FEATURE_FLAGS.md
A  docs/payments_automation/MIGRATION_PLAN.md
A  docs/payments_automation/PROVIDER_EVAL_TABLE.md
A  docs/payments_provider/PROVIDER_DECISION_LOG.md
A  docs/payments_provider/REAL_PAYMENTS_ENABLED.md
A  docs/payments_provider/SANDBOX_MODE.md
A  docs/payments_provider/SELECTED_PROVIDER.md
A  docs/payments_unfreeze/PAYMENT_FAILURE_MATRIX.md
A  docs/payments_unfreeze/PAYMENT_FLOW_SEQUENCE.md
A  docs/payments_unfreeze/PAYMENT_SECURITY_MODEL.md
A  docs/payments_unfreeze/PROVIDER_EVALUATION.md
A  docs/payments_unfreeze/PROVIDER_REQUIREMENTS.md
A  docs/payments_unfreeze/REFUNDS_POLICY.md
A  docs/payments_unfreeze/UNFREEZE_CHECKLIST.md
A  docs/prod/PAYMENTS_PROD_CHECKLIST.md
A  docs/release/RELEASE_SUMMARY_v1.md
A  docs/sdk/totem-sdk.iife.js
A  docs/sdk/totem-sdk.js
A  docs/system/NOTIFICATIONS.md
A  docs/system/OPS_INCIDENTS.md
A  docs/system/PERFORMANCE_SCALE.md
A  docs/system/REPORTING_ANALYTICS.md
A  docs/system/SECURITY_ACCESS.md
A  docs/system/SYSTEM_CHECKLIST.md
A  docs/webhooks/WEBHOOKS_AUDIT_LOG.md
A  docs/webhooks/WEBHOOKS_CONTRACT.md
A  docs/webhooks/WEBHOOKS_RETRY_POLICY.md
A  docs/webhooks/WEBHOOKS_SECURITY.md
A  docs/widget/iframe.html
A  docs/widget/totem-widget.iife.js
A  docs/widget/totem-widget.js
A  exports/payoutsCsv.js
A  front/index.html
A  helpers/updateBookingStatus.js
A  index.js
A  inspect_bookings_schema.js
A  jobs/autoClosePeriods.js
A  jobs/autoHealingHints.js
A  jobs/autoSettlement.js
A  jobs/backfillPayouts.js
A  jobs/dataDisciplineCheck.js
A  jobs/detectLockedPayouts.js
A  jobs/detectReconcileMismatch.js
A  jobs/detectWebhookFailures.js
A  jobs/metrics.js
A  jobs/payoutConsistencyCheck.js
A  jobs/queueWorker.js
A  jobs/retention.js
A  jobs/scheduler.js
A  jobs/settlements.js
A  lib/db.js
A  lib/overlap.js
A  logs/logger.js
A  middleware/abuseGuard.js
A  middleware/acl.js
A  middleware/alerts.js
A  middleware/anti_bypass.js
A  middleware/anti_bypass_public.js
A  middleware/api_guard.js
A  middleware/auth_owner.js
A  middleware/contractAssert.js
A  middleware/contractLifecycle.js
A  middleware/cors.js
A  middleware/guard.js
A  middleware/idempotency.js
A  middleware/ipGuard.js
A  middleware/logger.js
A  middleware/metrics.js
A  middleware/monetizationGuard.js
A  middleware/owner_only.js
A  middleware/publicTokenAuth.js
A  middleware/rateLimit.js
A  middleware/rate_limit.js
A  middleware/requestId.js
A  middleware/request_context.js
A  middleware/slot_flood.js
A  middleware/system_owner_guard.js
A  middleware/tenant.js
A  middleware/tenantRateLimit.js
A  middlewares/publicToken.js
A  middlewares/rateLimitPublic.js
A  middlewares/systemAuth.js
A  migrate.js
A  migrate_add_service_to_bookings.js
A  migrate_alerts.js
A  migrate_blocks.js
A  migrate_blocks_slug_fix.js
A  migrate_blocks_v1.js
A  migrate_bookings.js
A  migrate_cancel.js
A  migrate_marketplace_bookings.js
A  migrate_schedule.js
A  migrate_services.js
A  migrate_step14_status_log.js
A  migrate_step16_commissions.js
A  migrate_step17_source.js
A  migrate_step17b_payments.js
A  migrations/019_create_payouts.js
A  migrations/020_create_settlement_rules.js
A  migrations/022_create_refunds.js
A  migrations/2026-02-01__create_salon_master_services.sql
A  migrations/2026_01_25_add_booking_status.sql
A  migrations/2026_01_29_booking_audit.sql
A  migrations/2026_02_02_sms_single_active.sql
A  migrations/2026_02_06_create_payment_events.sql
A  migrations/2026_02_06_create_payments.sql
A  migrations/create_async_queue_v1.sql
A  migrations/migrate_marketplace_bookings.js
A  migrations/migrate_marketplace_salons.js
A  migrations/reset_marketplace_core.js
A  mkdir
A  openapi.yaml
A  package-lock.json
A  package.json
A  public/booking.html
A  public/index.html
A  public/sdk/test_sdk.mjs
A  public/sdk/totem-sdk.js
A  public/widget.js
A  public/widget/demo.html
A  public/widget/totem-widget.js
A  public_static/widget.js
A  reset_marketplace_core.js
A  routes/__debug_db_payments.js
A  routes/__probe_payments.js
A  routes/auth.js
A  routes/health.js
A  routes/me.js
A  routes/owner.js
A  routes/owner_actions.js
A  routes/owner_audit.js
A  routes/owner_dashboard.js
A  routes/owner_onboarding_readonly.js
A  routes/owner_onboarding_write.js
A  routes/payments_flow.js
A  routes/payments_webhook.js
A  routes/payout_execution.js
A  routes/payout_preview.js
A  routes/public.js
A  routes/public_booking.js
A  routes/public_payment.js
A  routes/public_payment_webhook.js
A  routes/public_status.js
A  routes/reconciliation.js
A  routes/reports.js
A  routes/settlement_batches.js
A  routes/system.js
A  routes/system_close_period.js
A  routes/system_metrics.js
A  routes/system_payouts.js
A  routes/system_reconciliation.js
A  routes/system_reconciliation_period.js
A  routes/system_settlement.js
A  routes_analytics/analytics.js
A  routes_analytics/cohorts.js
A  routes_analytics/export.js
A  routes_analytics/pricing.js
A  routes_bi/preview.js
A  routes_marketplace/audit.js
A  routes_marketplace/autoSettlement.js
A  routes_marketplace/bookingStatus.js
A  routes_marketplace/maintenance.js
A  routes_marketplace/marketplace_booking_create.js
A  routes_marketplace/metricsTenants.js
A  routes_marketplace/payments.js
A  routes_marketplace/payouts.js
A  routes_marketplace/payoutsCreate.js
A  routes_marketplace/publicPaymentsWebhook.js
A  routes_marketplace/publicRequestProcess.js
A  routes_marketplace/publicRequests.js
A  routes_marketplace/publicTokens.js
A  routes_marketplace/refunds.js
A  routes_marketplace/reports.js
A  routes_marketplace/salon.js
A  routes_marketplace/settlement.js
A  routes_marketplace/system_payment_confirm.js
A  routes_marketplace/system_reports.js
A  routes_marketplace/system_settlement.js
A  routes_owner/asyncJobs.js
A  routes_owner/index.js
A  routes_public/auth.js
A  routes_public/availability.js
A  routes_public/book.js
A  routes_public/bookingCancel.js
A  routes_public/bookingCreate.js
A  routes_public/bookingResult.js
A  routes_public/bookingStatusRead.js
A  routes_public/bookings.js
A  routes_public/index.js
A  routes_public/masters.js
A  routes_public/paymentsIntent.js
A  routes_public/paymentsRead.js
A  routes_public/salons.js
A  routes_public/sdk.js
A  routes_public/services.js
A  routes_public/widget.js
A  routes_system/alerts.js
A  routes_system/bookingComplete.js
A  routes_system/bookingTimeout.js
A  routes_system/dataContracts.js
A  routes_system/exportBookings.js
A  routes_system/health.js
A  routes_system/index.js
A  routes_system/jobs.js
A  routes_system/monetization.js
A  routes_system/opsAlerts.js
A  routes_system/opsDashboard.js
A  routes_system/opsExport.js
A  routes_system/paymentWebhook.js
A  routes_system/paymentsWebhook.js
A  routes_system/payoutConsistency.js
A  routes_system/payoutFixes.js
A  routes_system/payoutSettlement.js
A  routes_system/payoutsSettle.js
A  routes_system/publicTokens.js
A  scheduler.js
A  scripts/dry_run_payouts.js
A  scripts/migrate_step23_idempotency.js
A  scripts/ops_check.js
A  sdk/totem-sdk.js
A  seed_blocks.js
A  services/alerts.js
A  services/alertsDedup.js
A  services/commission.js
A  services/payment_flow.js
A  services/payment_intent.js
A  services/payment_provider_mock.js
A  services/payout.js
A  services/payout_execution.js
A  services/payout_preview.js
A  services/reconciliation.js
A  services_analytics/cohorts.js
A  services_analytics/core.js
A  services_analytics/export.js
A  services_analytics/pricing.js
A  src/payments/PaymentService.ts
A  src/payments/PaymentTypes.ts
A  src/payments/index.ts
A  src/payments/payments.README.md
A  src/payments/payments.flags.ts
A  src/payments/providers/ProviderAdapter.ts
A  src/payments/providers/ProviderRegistry.ts
A  src/payments/providers/providers.README.md
A  src/payments/providers/stripe.adapter.ts
A  src/payments/webhooks/payments.webhook.ts
A  src/payments/wire.runtime.ts
A  tests/payments/payment.flow.test.ts
A  tests/payments/payment.refund.test.ts
A  tests/payments/payment.webhook.test.ts
A  tests/payments/sandbox.run.ts
A  tests/payments/sandbox.smoke.test.ts
A  tools/check_is_active.js
A  tools/check_p5_1_tables.js
A  tools/cron_booking_timeout.js
A  tools/db_bootstrap_payments_v1.js
A  tools/db_bootstrap_pg_v1.js
A  tools/db_bootstrap_prod_v1.js
A  tools/db_bootstrap_public_v1.js
A  tools/db_inspect.js
A  tools/db_seed_prod_v1.js
A  tools/inspect_masters.js
A  tools/inspect_salons.js
A  tools/run_migration_p5_1.js
A  utils/audit.js
A  utils/auditOwnerAction.js
A  utils/auditOwnerActionPg.js
A  utils/contractHash.js
A  utils/enqueueJob.js
A  webhooks/sender.js
A  widget.html
A  widget/demo.html
A  widget/totem-widget.js
A  widget/widget.js
?? TOTEM_release_2026-02-06.zip
?? _public
?? backups/
?? body.json
?? cd
?? curl
?? db_schema_freeze.sql
?? db_schema_v1.sql
?? db_snapshot/
?? dir
?? docs/crm/(final)
?? docs/crm/anything
?? docs/crm/contacted
?? docs/crm/converted
?? docs/crm/lost
?? docs/crm/new
?? docs/crm/qualified
?? git
?? git_status_compact.txt
?? "how -1 --name-only"
?? node
?? notepad
?? npm
?? psql
?? sdk/test_sdk.mjs
?? services/catalog.js
?? set
?? taskkill
?? test-widget.html
?? test_owner_async_backfill.cmd
?? test_owner_async_backfill_example.cmd
?? test_owner_async_read.cmd
?? test_owner_run_worker.cmd
?? tools_make_payments_full_automation.py
?? tools_make_payments_provider_skeleton.py
?? tools_make_payments_unfreeze_multipack.py
?? tools_payments_final_automation.py
?? tools_payments_wire_and_check.py
?? tools_select_provider_and_enable_sandbox.py
?? type
?? {
